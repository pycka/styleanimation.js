/* StyleAnimation | by Rados≈Çaw Pycka | MIT licensed | v 0.1 */
function StyleAnimation(a,c,b,f,e){try{if(!Object.prototype.toString.call(a)==="[object Array]"||!a.length)a=[a]}catch(g){a=[a]}a=new StyleAnimation.Animation(a,c,b,f,e);a.start();return a} StyleAnimation.Animation=function(a,c,b,f,e){var g=StyleAnimation.getComputedStyle;this.elements=[];this.count=a.length;this.duration=b||500;this.easing=e&&(Object.prototype.toString.call(e)==="[object Function]"||StyleAnimation.dynamics[e])||StyleAnimation.dynamics.linear;this.callback=f;b=0;for(f=this.count;b<f;++b){var e=a[b],i={node:e},d=[],h;for(h in c)if(c.hasOwnProperty(h)){var j=StyleAnimation.properties[h]||StyleAnimation.accessors.numeric,j={name:h,accessor:j,start:j.get(g(e,h)),target:j.get(c[h])}; d.push(j)}i.properties=d;this.propertyCount=d.length;this.elements.push(i)}return this};StyleAnimation.Animation.prototype.stop=function(){this.cancel=!0};StyleAnimation.Animation.prototype.start=function(){var a=this;this.cancel=!1;this.startTime=StyleAnimation.utime();this.requestAnimationFrame(function(){a.animate()})}; StyleAnimation.Animation.prototype.requestAnimationFrame=function(a){return a.mozRequestAnimationFrame?function(a){mozRequestAnimationFrame(a)}:a.webkitRequestAnimationFrame?function(a){webkitRequestAnimationFrame(a)}:function(a){this.timer=setTimeout(a,10)}}(window); StyleAnimation.Animation.prototype.animate=function(a){var c=this;if(!this.cancel)if(a=StyleAnimation.utime(),a=(a-this.startTime)/this.duration,a<1){for(var b=0,f=this.count;b<f;++b)for(var e=this.elements[b],g=0,i=this.propertyCount;g<i;++g){var d=e.properties[g],h=d.accessor.update(d.start,d.target,this.easing(a));d.accessor.set(e.node,d.name,d.start,h)}this.requestAnimationFrame(function(){c.animate()})}else{b=0;for(f=this.count;b<f;++b){e=this.elements[b];g=0;for(i=this.propertyCount;g<i;++g)this.cancel= !0,d=e.properties[g],d.accessor.set(e.node,d.name,d.start,d.target),this.callback&&this.callback()}}};StyleAnimation.accessors={};StyleAnimation.accessors.numeric={get:function(a){var c=null;(a=/([.0-9+-]+)([^.0-9+-]+)?/.exec(a))&&(c={value:a[1]>>>0,unit:a[2]||null});return c},set:function(a,c,b,f){a.style[c]=f.value+(b.unit||"")},update:function(a,c,b){return{value:a.value+(c.value-a.value)*b,unit:a.unit}}};StyleAnimation.properties={};StyleAnimation.dynamics={};StyleAnimation.dynamics.linear=function(a){return a}; StyleAnimation.dynamics.logarithmic=function(a){return Math.log(a*100)/Math.log(100)};StyleAnimation.getComputedStyle=function(a,c){if(a.getComputedStyle)return function(b,c){return a.getComputedStyle(b,null)[c]};else if(c.documentElement.currentStyle)return function(a,c){return a.currentStyle[c]};else throw Error("StyleAnimation: no supported getter for computed CSS properties found");}(window,document);StyleAnimation.utime=function(){return Date.now?function(){return Date.now()}:function(){return new Date}}();
